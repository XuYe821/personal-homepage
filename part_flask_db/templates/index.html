{% extends "base.html"%}
{% import "bootstrap/wtf.html" as wtf %}
{%block title%} Flasky{%endblock%}
{%block page_content%}
<div class="container">
    {% for message in get_flashed_messages() %}
    <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        {{message}}
    </div>
    {%endfor%}
</div>
<div class="page-header">
    <h1>Student Records</h1> 
    <div>
        <a href="{{ url_for('index') }}" class="btn btn-primary btn-xs">所有学生</a>
        {% for m in majors %}
            <a href="{{ url_for('filter_by_major', major_id=m.id) }}" class="btn btn-default btn-xs">{{ m.major_name }}</a>
        {% endfor %}
    </div>
</div>
<a href="{{url_for('new_stud')}}">New Record</a>
<h4>{{studs|length}} students</h4>
{%for stud in studs%}
<div>
    <p>{{stud.student_name}}</p>
<div>
    <p>
        {% if stud.major %}
            <span class="label label-info">{{ stud.major.major_name }}</span>
        {% else %}
            <span class="label label-default">未分配专业</span>
        {% endif %}
    </p>
    <a class="btn" href="{{url_for('edit_stud',stu_id=stud.student_id)}}">Edit</a> 
    <a class="btn" href="{{url_for('del_stud',stud_id=stud.student_id)}}">Delete</a> 
</div>
{%endfor%}
{%endblock%}